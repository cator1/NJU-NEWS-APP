{"version":3,"file":"app.js","sources":["App.vue","main.js"],"sourcesContent":["<script>\r\n\timport { useUserStore } from './store/user';\r\n\t\r\n\texport default {\r\n\t\tonLaunch: function() {\r\n\t\t\tconsole.log('App Launch');\r\n\t\t\t\r\n\t\t\tconst userStore = useUserStore();\r\n\t\t\t\r\n\t\t\t// 获取当前日期，格式为 yyyy-mm-dd\n\t\t\tconst today = new Date();\n\t\t\tconst year = today.getFullYear();\n\t\t\tconst month = String(today.getMonth() + 1).padStart(2, '0'); // 月份从0开始\n\t\t\tconst day = String(today.getDate() - 1).padStart(2, '0');\n\t\t\tconst dateStr = `${year}-${month}-${day}`;\r\n\t\t\t//console.log(dateStr); // 打印日期字符串\r\n\t\t\t\r\n\t\t\tconst backupUrlFetcher = 'https://nik-nul.github.io/keep/url.txt'; // 备用地址获取接口\r\n\r\n\t\t\tconst url = `http://52.184.65.42/typst/${dateStr}`;\r\n\t\t\tconst testurl = `http://52.184.65.42/typst/2025-06-25`\n\t\t\t// console.log(date);\r\n\t\t\tuni.request({\r\n\t\t\t\turl:url,\r\n\t\t\t\tmethod:'GET',\r\n\t\t\t\tsuccess(res){\r\n\t\t\t\t\tuserStore.setUserInfo(res.data)\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\n\t\t\t\t\tconsole.error('请求失败,尝试备用地址');\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl:backupUrlFetcher,\r\n\t\t\t\t\t\tmethod:'GET',\r\n\t\t\t\t\t\tsuccess(backres) {\r\n\t\t\t\t\t\t\tconst newBaseurl = backres.data.trim();\r\n\t\t\t\t\t\t\tif(!newBaseurl){\r\n\t\t\t\t\t\t\t\tconsole.error('备用地址为空');\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tconst newurl = `http://${newBaseurl}/typst/${dateStr}`;\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\turl:newurl,\r\n\t\t\t\t\t\t\t\tmethod:'GET',\r\n\t\t\t\t\t\t\t\tsuccess(res2) {\r\n\t\t\t\t\t\t\t\t\tuserStore.setUserInfo(res2.data)\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail(err2) {\r\n\t\t\t\t\t\t\t\t\tconsole.error('备用服务器请求失败:', err2);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err3) {\r\n\t\t\t\t\t\t\tconsole.error('备用地址请求失败');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tconsole.log('App Show')\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\tconsole.log('App Hide')\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tconst userStore = useUserStore()\r\n\t\t\tconsole.log(userStore.userInfo)\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t/*每个页面公共css */\r\n\tbody{\r\n\t\tbackground-color: #f8f8f8;\r\n\t}\r\n</style>\n","import App from './App'\nimport {createApp as createVueApp} from 'vue'\r\nimport {createPinia} from 'pinia'\r\n\n// #ifndef VUE3\nimport Vue, { h } from 'vue'\nimport './uni.promisify.adaptor'\nVue.config.productionTip = false\nApp.mpType = 'app'\nconst app = new Vue({\n  ...App\n})\napp.$mount()\n// #endif\n\n// #ifdef VUE3\nimport { createSSRApp } from 'vue'\nexport function createApp() {\n  const app = createSSRApp(App)\r\n  const pinia = createPinia()\r\n  app.use(pinia)\n  return {\n    app\n  }\n}\n// #endif"],"names":["uni","useUserStore","createSSRApp","App","createPinia"],"mappings":";;;;;;;;;;;;AAGC,MAAK,YAAU;AAAA,EACd,UAAU,WAAW;AACpBA,kBAAAA,MAAA,MAAA,OAAA,gBAAY,YAAY;AAExB,UAAM,YAAYC,WAAAA;AAGlB,UAAM,QAAQ,oBAAI;AAClB,UAAM,OAAO,MAAM;AACnB,UAAM,QAAQ,OAAO,MAAM,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AAC1D,UAAM,MAAM,OAAO,MAAM,QAAO,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACvD,UAAM,UAAU,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAGvC,UAAM,mBAAmB;AAEzB,UAAM,MAAM,6BAA6B,OAAO;AAGhDD,kBAAAA,MAAI,QAAQ;AAAA,MACX;AAAA,MACA,QAAO;AAAA,MACP,QAAQ,KAAI;AACX,kBAAU,YAAY,IAAI,IAAI;AAAA,MAC9B;AAAA,MACD,KAAK,KAAK;AACTA,sBAAAA,sCAAc,aAAa;AAC3BA,sBAAAA,MAAI,QAAQ;AAAA,UACX,KAAI;AAAA,UACJ,QAAO;AAAA,UACP,QAAQ,SAAS;AAChB,kBAAM,aAAa,QAAQ,KAAK,KAAI;AACpC,gBAAG,CAAC,YAAW;AACdA,4BAAAA,MAAc,MAAA,SAAA,iBAAA,QAAQ;AACtB;AAAA,YACD;AAEA,kBAAM,SAAS,UAAU,UAAU,UAAU,OAAO;AACpDA,0BAAAA,MAAI,QAAQ;AAAA,cACX,KAAI;AAAA,cACJ,QAAO;AAAA,cACP,QAAQ,MAAM;AACb,0BAAU,YAAY,KAAK,IAAI;AAAA,cAC/B;AAAA,cACD,KAAK,MAAM;AACVA,8BAAc,MAAA,MAAA,SAAA,iBAAA,cAAc,IAAI;AAAA,cACjC;AAAA,aACA;AAAA,UACD;AAAA,UACD,KAAK,MAAM;AACVA,0BAAAA,sCAAc,UAAU;AAAA,UACzB;AAAA,QACD,CAAC;AAAA,MACF;AAAA,IACD,CAAC;AAAA,EACD;AAAA,EACD,QAAQ,WAAW;AAClBA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AAAA,EACtB;AAAA,EACD,QAAQ,WAAW;AAClBA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AAAA,EACtB;AAAA,EACD,UAAU;AACT,UAAM,YAAYC,WAAAA,aAAa;AAC/BD,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU,QAAQ;AAAA,EAC/B;AACD;ACpDM,SAAS,YAAY;AAC1B,QAAM,MAAME,cAAY,aAACC,SAAG;AAC5B,QAAM,QAAQC,cAAAA,YAAa;AAC3B,MAAI,IAAI,KAAK;AACb,SAAO;AAAA,IACL;AAAA,EACD;AACH;;;"}