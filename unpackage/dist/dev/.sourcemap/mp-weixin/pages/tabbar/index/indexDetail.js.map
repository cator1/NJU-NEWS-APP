{"version":3,"file":"indexDetail.js","sources":["pages/tabbar/index/indexDetail.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdGFiYmFyL2luZGV4L2luZGV4RGV0YWlsLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"activity-detail\">\n    <!-- 骨架屏（加载中） -->\n    <view v-if=\"!loaded\" class=\"skeleton\">\n      <view class=\"skeleton-title\"></view>\n      <view class=\"skeleton-line\" v-for=\"n in 4\" :key=\"n\"></view>\n      <view class=\"skeleton-link\"></view>\n    </view>\n\n    <!-- 正式内容 -->\n    <view v-else>\n      <view v-if=\"activity\">\n        <text class=\"title\" user-select>{{ activity.title }}</text>\n        <view class=\"desc\">\n          <template v-for=\"(block, index) in (activity.description || [])\" :key=\"index\">\n            <text v-if=\"block\" user-select>\n              {{ block.content }}\n            </text>\n          </template>\n        </view>\n        <view v-if=\"activity.link\" class=\"link\">\n          <text @click=\"openInBrowser(activity.link)\">查看原文链接</text>\n        </view>\n      </view>\n\n      <view v-else class=\"error\">\n        <text>活动不存在</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { useUserStore } from '../../../store/user'\n\nexport default {\n  data() {\n    return {\n      activity: null,\n      loaded: false\n    }\n  },\n  computed: {\n    userStore() {\n      return useUserStore()\n    }\n  },\n  watch: {\n    'userStore.userInfo': {\n      handler() {\n        this.tryFindActivity()\n      },\n      immediate: true,\n      deep: true\n    }\n  },\n  onLoad(options) {\n    this.options = options\n    this.tryFindActivity()\n  },\n  methods: {\n    tryFindActivity() {\n      const id = Number(this.options?.id)\n      const all =\n        [\n          ...(this.userStore.userInfo?.data?.college || []),\n          ...(this.userStore.userInfo?.data?.club || []),\n          ...(this.userStore.userInfo?.data?.other || [])\n        ]\n      const found = all.find(a => a.id === id)\n      if (found) {\n        this.activity = found\n      }\n      this.loaded = true\n    },\r\n    openInBrowser(link) {\n      // #ifdef APP-PLUS\n      if (link) {\n        plus.runtime.openURL(link, function(res) {\n          console.log('打开外链失败', res);\n        });\n      }\n      // #endif\n\n      // #ifndef APP-PLUS\n      uni.showToast({\n        title: '仅支持App中打开外链',\n        icon: 'none'\n      });\n      // #endif\n    }\n  }\n}\n</script>\n\n<style>\n.activity-detail {\n  padding: 20rpx;\n}\n.title {\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 16rpx;\n}\n.desc {\n  font-size: 14px;\n  line-height: 1.8;\n  color: #333;\n  white-space: pre-wrap;\n}\n.link {\n  margin-top: 20rpx;\r\n  color: #00007f;\n}\n.error {\n  color: red;\n  font-size: 16px;\n  text-align: center;\n  margin-top: 100rpx;\n}\r\n\r\n/* 骨架屏样式 */\n.skeleton {\n  padding: 20rpx;\n}\n.skeleton-title {\n  width: 70%;\n  height: 28rpx;\n  background-color: #eee;\n  border-radius: 6rpx;\n  margin-bottom: 24rpx;\n}\n.skeleton-line {\n  width: 100%;\n  height: 18rpx;\n  background-color: #eee;\n  border-radius: 6rpx;\n  margin-bottom: 16rpx;\n}\n.skeleton-link {\n  width: 40%;\n  height: 24rpx;\n  background-color: #ddd;\n  border-radius: 6rpx;\n  margin-top: 20rpx;\n}\n\n</style>\n","import MiniProgramPage from 'D:/NJU/code/NJUnews/code/njunews/pages/tabbar/index/indexDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","uni"],"mappings":";;;AAmCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,MACV,QAAQ;AAAA,IACV;AAAA,EACD;AAAA,EACD,UAAU;AAAA,IACR,YAAY;AACV,aAAOA,wBAAa;AAAA,IACtB;AAAA,EACD;AAAA,EACD,OAAO;AAAA,IACL,sBAAsB;AAAA,MACpB,UAAU;AACR,aAAK,gBAAgB;AAAA,MACtB;AAAA,MACD,WAAW;AAAA,MACX,MAAM;AAAA,IACR;AAAA,EACD;AAAA,EACD,OAAO,SAAS;AACd,SAAK,UAAU;AACf,SAAK,gBAAgB;AAAA,EACtB;AAAA,EACD,SAAS;AAAA,IACP,kBAAkB;;AAChB,YAAM,KAAK,QAAO,UAAK,YAAL,mBAAc,EAAE;AAClC,YAAM,MACJ;AAAA,QACE,KAAI,gBAAK,UAAU,aAAf,mBAAyB,SAAzB,mBAA+B,YAAW,CAAE;AAAA,QAChD,KAAI,gBAAK,UAAU,aAAf,mBAAyB,SAAzB,mBAA+B,SAAQ,CAAE;AAAA,QAC7C,KAAI,gBAAK,UAAU,aAAf,mBAAyB,SAAzB,mBAA+B,UAAS,CAAE;AAAA,MAChD;AACF,YAAM,QAAQ,IAAI,KAAK,OAAK,EAAE,OAAO,EAAE;AACvC,UAAI,OAAO;AACT,aAAK,WAAW;AAAA,MAClB;AACA,WAAK,SAAS;AAAA,IACf;AAAA,IACD,cAAc,MAAM;AAUlBC,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACR,CAAC;AAAA,IAEH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3FA,GAAG,WAAW,eAAe;"}