{"version":3,"file":"index.js","sources":["pages/tabbar/index/index.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdGFiYmFyL2luZGV4L2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"tabs\">\n    <!-- 顶部固定导航栏 -->\n    <view class=\"tab-bar\">\n      <view\n        class=\"uni-tab-item\"\n        v-for=\"(tab, index) in tabList\"\n        :key=\"tab.id\"\n        :data-current=\"index\"\n        @click=\"ontabtap\"\n        :class=\"{ 'uni-tab-item-active': tabIndex == index }\"\n      >\n        <text class=\"uni-tab-item-title\">{{ tab.name }}</text>\n      </view>\n    </view>\r\n\t\n    <!-- swiper 内容区 -->\n    <swiper\n      class=\"tab-box\"\n      :current=\"tabIndex\"\n      :duration=\"300\"\n      @change=\"onswiperchange\"\n    >\n\t  <swiper-item\r\n\t    class=\"swiper-item\"\r\n\t    v-for=\"(tab, index) in tabList\"\r\n\t    :key=\"tab.id\"\r\n\t  >\r\n\t    <scroll-view scroll-y class=\"scroll-list\">\r\n\t      <uni-list v-if=\"getListByIndex(index).length > 0\">\r\n\t        <uni-list-item\r\n\t          v-for=\"(item, i) in getListByIndex(index)\"\r\n\t          :key=\"i\"\r\n\t          showArrow\r\n\t\t\t  clickable\r\n\t\t\t  @click=\"goToDetail(item)\"\r\n\t        >\r\n\t          <template v-slot:body>\r\n\t            <view class=\"list-item-box\">\r\n\t              <text class=\"title\">{{ item.title }}</text>\r\n\t              <text class=\"desc\">{{ getTextContent(item.description) }}</text>\r\n\t            </view>\r\n\t          </template>\r\n\t        </uni-list-item>\r\n\t      </uni-list>\r\n\t      <view v-else class=\"empty-tip\">暂无内容</view>\r\n\t    </scroll-view>\r\n\t  </swiper-item>\n    </swiper>\n  </view>\n</template>\n\n<script>\r\nimport { useUserStore } from '../../../store/user'\r\nimport checkUpdate from '@/uni_modules/uni-upgrade-center-app/utils/check-update'\r\n\r\n\r\n\t\nexport default {\n  data() {\n    return {\n      tabList: [\n        { id: 'tab01', name: '校级活动' },\n        { id: 'tab02', name: '院级活动' },\r\n\t\t{ id: 'tab03', name: '社团活动' },\n      ],\n      tabIndex: 0\n    };\n  },\n  methods: {\n    ontabtap(e) {\n      const index = Number(e.currentTarget.dataset.current);\n      this.tabIndex = index;\n    },\n    onswiperchange(e) {\n      this.tabIndex = e.detail.current;\n    },\r\n\tgetListByIndex(index) {\r\n\t  const info = this.userStore.userInfo?.data || {}\r\n\t  if (index === 0) return info.other || []\r\n\t  if (index === 1) return info.college || []\r\n\t  if (index === 2) return info.club || []\r\n\t  return []\r\n\t},\r\n\tgetTextContent(descList) {\r\n\t  if (!Array.isArray(descList)) return ''\r\n\t  return descList\r\n\t    // .filter(d => d.type === 'text')\r\n\t    .map(d => d.content)\r\n\t    .join('\\n') // 用换行符拼接（也可用空格或其它符号）\r\n\t},\r\n\tgoToDetail(item) {\r\n\t  if (!item?.id) return\r\n\t  uni.navigateTo({\r\n\t    url: `/pages/tabbar/index/indexDetail?id=${item.id}`\r\n\t  })\r\n\t}\r\n\n  },\r\n  computed: {\r\n    userStore() {\r\n      return useUserStore()\r\n    }\r\n  },\r\n  onReady() {\r\n  \tcheckUpdate()\r\n  }\n};\n</script>\n\n<style>\n.tabs {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background-color: #f8f8f8;\n}\n\n/* 顶部导航栏（非滚动） */\n.tab-bar {\n  height: 42px;\n  display: flex;\n  flex-direction: row;\n  border-bottom: 1px solid #ddd;\n  background-color: #f8f8f8;\n}\n\n.uni-tab-item {\n  flex: 1; /* 平均分布宽度 */\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.uni-tab-item-title {\n  font-size: 15px;\n  color: #555;\n  line-height: 40px;\n}\n\n.uni-tab-item-active .uni-tab-item-title {\n  color: #aa00ff;\n  font-weight: bold;\n  border-bottom: 2px solid #aa00ff;\n}\n\n/* 内容区域 */\n.tab-box {\n  flex: 1;\r\n  height: 100%;\r\n  overflow: hidden; /* 可选，加上更安全 */\n}\n\n.swiper-item {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.page-item {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\r\n\r\n.list-item-box {\n  display: flex;\n  flex-direction: column;\n}\n\n.title {\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 4rpx;\n  color: #333;\n}\n\n.desc {\n  font-size: 14px;\n  color: #666;\n  white-space: pre-wrap; /* 支持换行 */\n}\n\n.scroll-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20rpx;\n}\n\n.empty-tip {\n  font-size: 14px;\n  color: #999;\n  text-align: center;\n  margin-top: 40rpx;\n}\n\r\n.scroll-list {\n  height: 100%;\n  padding: 16rpx;\n  box-sizing: border-box;\n}\n\n.swiper-item {\n  height: 100%;\n}\n</style>\n","import MiniProgramPage from 'D:/NJU/code/NJUnews/code/njunews/pages/tabbar/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","useUserStore","checkUpdate"],"mappings":";;;;AA0DA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,SAAS;AAAA,QACP,EAAE,IAAI,SAAS,MAAM,OAAQ;AAAA,QAC7B,EAAE,IAAI,SAAS,MAAM,OAAQ;AAAA,QACnC,EAAE,IAAI,SAAS,MAAM,OAAQ;AAAA,MACxB;AAAA,MACD,UAAU;AAAA;EAEb;AAAA,EACD,SAAS;AAAA,IACP,SAAS,GAAG;AACV,YAAM,QAAQ,OAAO,EAAE,cAAc,QAAQ,OAAO;AACpD,WAAK,WAAW;AAAA,IACjB;AAAA,IACD,eAAe,GAAG;AAChB,WAAK,WAAW,EAAE,OAAO;AAAA,IAC1B;AAAA,IACJ,eAAe,OAAO;;AACpB,YAAM,SAAO,UAAK,UAAU,aAAf,mBAAyB,SAAQ,CAAC;AAC/C,UAAI,UAAU;AAAG,eAAO,KAAK,SAAS,CAAC;AACvC,UAAI,UAAU;AAAG,eAAO,KAAK,WAAW,CAAC;AACzC,UAAI,UAAU;AAAG,eAAO,KAAK,QAAQ,CAAC;AACtC,aAAO,CAAC;AAAA,IACT;AAAA,IACD,eAAe,UAAU;AACvB,UAAI,CAAC,MAAM,QAAQ,QAAQ;AAAG,eAAO;AACrC,aAAO,SAEJ,IAAI,OAAK,EAAE,OAAO,EAClB,KAAK,IAAI;AAAA,IACb;AAAA,IACD,WAAW,MAAM;AACf,UAAI,EAAC,6BAAM;AAAI;AACfA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,sCAAsC,KAAK,EAAE;AAAA,OACnD;AAAA,IACH;AAAA,EAEE;AAAA,EACD,UAAU;AAAA,IACR,YAAY;AACV,aAAOC,wBAAa;AAAA,IACtB;AAAA,EACD;AAAA,EACD,UAAU;AACTC,kEAAY;AAAA,EACb;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1GA,GAAG,WAAW,eAAe;"}