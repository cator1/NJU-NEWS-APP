{"version":3,"names":["_sfc_main","data","tabList","id","name","tabIndex","methods","ontabtap","e","index","Number","currentTarget","dataset","current","onswiperchange","detail","getListByIndex","info","userStore","userInfo","todayLectures","lecture","getTextContent","descList","Array","isArray","filter","d","type","map","content","join","goToDetail","item","common_vendor","navigateTo","url","concat","computed","store_user","useUserStore","_this","list","_a","due_time","todayStr","now","Date","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","wx","createPage","MiniProgramPage"],"sources":["lecture.vue","cGFnZXMvdGFiYmFyL2xlY3R1cmUvbGVjdHVyZS52dWU"],"sourcesContent":["<template>\n  <view class=\"tabs\">\n    <!-- 顶部固定导航栏 -->\n    <view class=\"tab-bar\">\n      <view\n        class=\"uni-tab-item\"\n        v-for=\"(tab, index) in tabList\"\n        :key=\"tab.id\"\n        :data-current=\"index\"\n        @click=\"ontabtap\"\n        :class=\"{ 'uni-tab-item-active': tabIndex == index }\"\n      >\n        <text class=\"uni-tab-item-title\">{{ tab.name }}</text>\n      </view>\n    </view>\n\n    <!-- swiper 内容区 -->\n    <swiper\n      class=\"tab-box\"\n      :current=\"tabIndex\"\n      :duration=\"300\"\n      @change=\"onswiperchange\"\n    >\n\t  <swiper-item\r\n\t    class=\"swiper-item\"\r\n\t    v-for=\"(tab, index) in tabList\"\r\n\t    :key=\"tab.id\"\r\n\t  >\r\n\t    <scroll-view scroll-y class=\"scroll-list\">\r\n\t      <uni-list v-if=\"getListByIndex(index).length > 0\">\r\n\t        <uni-list-item\r\n\t          v-for=\"(item, i) in getListByIndex(index)\"\r\n\t          :key=\"i\"\r\n\t          showArrow\r\n\t\t\t  clickable\r\n\t\t\t  @click=\"goToDetail(item)\"\r\n\t        >\r\n\t          <template v-slot:body>\r\n\t            <view class=\"list-item-box\">\r\n\t              <text class=\"title\">{{ item.title }}</text>\r\n\t              <text class=\"desc\">{{ getTextContent(item.description) }}</text>\r\n\t            </view>\r\n\t          </template>\r\n\t        </uni-list-item>\r\n\t      </uni-list>\r\n\t      <view v-else class=\"empty-tip\">暂无内容</view>\r\n\t    </scroll-view>\r\n\t  </swiper-item>\n    </swiper>\n  </view>\n</template>\n\n<script>\r\nimport { useUserStore } from '../../../store/user'\r\n\nexport default {\n  data() {\n    return {\n      tabList: [\n        { id: 'tab01', name: '今日讲座' },\n        { id: 'tab02', name: '近期上新' }\n      ],\n      tabIndex: 0\n    };\n  },\n  methods: {\r\n    //页面跳转\n    ontabtap(e) {\n      const index = Number(e.currentTarget.dataset.current);\n      this.tabIndex = index;\n    },\n    onswiperchange(e) {\n      this.tabIndex = e.detail.current;\n    },\r\n\t//页面内容数据跳转\r\n\tgetListByIndex(index) {\r\n\t  const info = this.userStore.userInfo.data || {}\r\n\t  if (index === 0) return this.todayLectures || []\r\n\t  if (index === 1) return info.lecture || []\r\n\t  return []\r\n\t},\r\n\t//获取详情描述\r\n\tgetTextContent(descList) {\r\n\t  if (!Array.isArray(descList)) return ''\r\n\t  return descList\r\n\t    .filter(d => d.type === 'text')\r\n\t    .map(d => d.content)\r\n\t    .join('\\n') // 用换行符拼接（也可用空格或其它符号）\r\n\t},\r\n\t//跳转详情页\r\n\tgoToDetail(item) {\r\n\t  uni.navigateTo({\r\n\t    url: `/pages/tabbar/lecture/lectureDetail?id=${item.id}`\r\n\t  })\r\n\t}\r\n\n  },\r\n  computed: {\r\n\t//载入数据\r\n    userStore() {\r\n      return useUserStore()\r\n    },\r\n\t//筛选当天信息\r\n    todayLectures() {\n      const list = this.userStore.userInfo?.lecture || []\n      return list.filter(item => item.due_time === this.todayStr)\n    },\r\n\t//获取今日日期\r\n    todayStr() {\r\n      const now = new Date()\r\n      const yyyy = now.getFullYear()\r\n      const mm = String(now.getMonth() + 1).padStart(2, '0')\r\n      const dd = String(now.getDate()).padStart(2, '0')\r\n      return `${yyyy}-${mm}-${dd}` // 比如：2025-07-03\r\n    },\r\n  },\n};\n</script>\n\n<style>\n.tabs {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background-color: #f8f8f8;\n}\n\n/* 顶部导航栏（非滚动） */\n.tab-bar {\n  height: 42px;\n  display: flex;\n  flex-direction: row;\n  border-bottom: 1px solid #ddd;\n  background-color: #f8f8f8;\n}\n\n.uni-tab-item {\n  flex: 1; /* 平均分布宽度 */\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.uni-tab-item-title {\n  font-size: 15px;\n  color: #555;\n  line-height: 40px;\n}\n\n.uni-tab-item-active .uni-tab-item-title {\n  color: #aa00ff;\n  font-weight: bold;\n  border-bottom: 2px solid #aa00ff;\n}\n\n/* 内容区域 */\n.tab-box {\n  flex: 1;\n}\n\n.swiper-item {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.page-item {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\r\n\r\n.list-item-box {\n  display: flex;\n  flex-direction: column;\n}\n\n.title {\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 4rpx;\n  color: #333;\n}\n\n.desc {\n  font-size: 14px;\n  color: #666;\n  white-space: pre-wrap; /* 支持换行 */\n}\n\n.scroll-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20rpx;\n}\n\n.empty-tip {\n  font-size: 14px;\n  color: #999;\n  text-align: center;\n  margin-top: 40rpx;\n}\n\r\n.scroll-list {\n  height: 100%;\n  padding: 16rpx;\n  box-sizing: border-box;\n}\n\n.swiper-item {\n  height: 100%;\n}\n</style>\n","import MiniProgramPage from 'D:/NJU/code/NJUnews/code/njunews/pages/tabbar/lecture/lecture.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;AAuDA,IAAKA,SAAA,GAAU;EACbC,IAAA,WAAAA,KAAA,EAAO;IACL,OAAO;MACLC,OAAA,EAAS,CACP;QAAEC,EAAA,EAAI;QAASC,IAAA,EAAM;MAAQ,GAC7B;QAAED,EAAA,EAAI;QAASC,IAAA,EAAM;MAAO,EAC7B;MACDC,QAAA,EAAU;IAAA;EAEb;EACDC,OAAA,EAAS;IAAA;IAEPC,QAAA,WAAAA,SAASC,CAAA,EAAG;MACV,IAAMC,KAAA,GAAQC,MAAA,CAAOF,CAAA,CAAEG,aAAA,CAAcC,OAAA,CAAQC,OAAO;MACpD,KAAKR,QAAA,GAAWI,KAAA;IACjB;IACDK,cAAA,WAAAA,eAAeN,CAAA,EAAG;MAChB,KAAKH,QAAA,GAAWG,CAAA,CAAEO,MAAA,CAAOF,OAAA;IAC1B;IAAA;IAEJG,cAAA,WAAAA,eAAeP,KAAA,EAAO;MACpB,IAAMQ,IAAA,GAAO,KAAKC,SAAA,CAAUC,QAAA,CAASlB,IAAA,IAAQ,CAAC;MAC9C,IAAIQ,KAAA,KAAU,GAAG,OAAO,KAAKW,aAAA,IAAiB,EAAC;MAC/C,IAAIX,KAAA,KAAU,GAAG,OAAOQ,IAAA,CAAKI,OAAA,IAAW,EAAC;MACzC,OAAO,EAAC;IACT;IAAA;IAEDC,cAAA,WAAAA,eAAeC,QAAA,EAAU;MACvB,IAAI,CAACC,KAAA,CAAMC,OAAA,CAAQF,QAAQ,GAAG,OAAO;MACrC,OAAOA,QAAA,CACJG,MAAA,CAAO,UAAAC,CAAA;QAAA,OAAKA,CAAA,CAAEC,IAAA,KAAS,MAAM;MAAA,GAC7BC,GAAA,CAAI,UAAAF,CAAA;QAAA,OAAKA,CAAA,CAAEG,OAAO;MAAA,GAClBC,IAAA,CAAK,IAAI;IACb;IAAA;IAEDC,UAAA,WAAAA,WAAWC,IAAA,EAAM;MACfC,aAAA,CAAAzB,KAAA,CAAI0B,UAAA,CAAW;QACbC,GAAA,4CAAAC,MAAA,CAA+CJ,IAAA,CAAK9B,EAAE;MAAA,CACvD;IACH;EAEE;EACDmC,QAAA,EAAU;IAAA;IAERpB,SAAA,WAAAA,UAAA,EAAY;MACV,OAAOqB,UAAA,CAAAC,YAAA,EAAa;IACrB;IAAA;IAEDpB,aAAA,WAAAA,cAAA,EAAgB;MAAA,IAAAqB,KAAA;;MACd,IAAMC,IAAA,KAAOC,EAAA,QAAKzB,SAAA,CAAUC,QAAA,KAAf,gBAAAwB,EAAA,CAAyBtB,OAAA,KAAW,EAAC;MAClD,OAAOqB,IAAA,CAAKhB,MAAA,CAAO,UAAAO,IAAA;QAAA,OAAQA,IAAA,CAAKW,QAAA,KAAaH,KAAA,CAAKI,QAAQ;MAAA;IAC3D;IAAA;IAEDA,QAAA,WAAAA,SAAA,EAAW;MACT,IAAMC,GAAA,GAAM,mBAAIC,IAAA,EAAK;MACrB,IAAMC,IAAA,GAAOF,GAAA,CAAIG,WAAA,EAAY;MAC7B,IAAMC,EAAA,GAAKC,MAAA,CAAOL,GAAA,CAAIM,QAAA,EAAQ,GAAK,CAAC,EAAEC,QAAA,CAAS,GAAG,GAAG;MACrD,IAAMC,EAAA,GAAKH,MAAA,CAAOL,GAAA,CAAIS,OAAA,EAAS,EAAEF,QAAA,CAAS,GAAG,GAAG;MAChD,UAAAhB,MAAA,CAAUW,IAAI,OAAAX,MAAA,CAAIa,EAAE,OAAAb,MAAA,CAAIiB,EAAE;IAC3B;EACF;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnHAE,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}